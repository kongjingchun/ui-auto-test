# 如何查看 Allure 测试报告

## ⚠️ 重要提示

**不要直接双击打开 `UIreport/report/index.html` 文件！**

由于浏览器的安全限制，直接打开 HTML 文件会导致 JavaScript 无法加载本地资源，报告会一直显示 "Loading..."。

## ✅ 正确的查看方式

### 方法 1：使用 `allure serve`（推荐，最简单）

```bash
cd /Users/kongjingchun/MyData/code/XuetangCode/XuetangUI
allure serve UIreport
```

**优点：**
- 自动启动服务器
- 自动在浏览器中打开报告
- 最简单快捷

**操作：**
1. 在终端执行上述命令
2. 等待浏览器自动打开报告
3. 按 `Ctrl+C` 停止服务器

---

### 方法 2：使用提供的脚本

#### 方式 A：Shell 脚本
```bash
cd /Users/kongjingchun/MyData/code/XuetangCode/XuetangUI
./view_report.sh
```

#### 方式 B：Python 脚本
```bash
cd /Users/kongjingchun/MyData/code/XuetangCode/XuetangUI
python3 view_report_http.py
```

**优点：**
- 自动打开浏览器
- 使用固定端口（8080）

**访问地址：** http://localhost:8080/index.html

---

### 方法 3：使用 Python 内置 HTTP 服务器（无需额外脚本）

```bash
# 1. 进入报告目录
cd /Users/kongjingchun/MyData/code/XuetangCode/XuetangUI/UIreport/report

# 2. 启动 HTTP 服务器
python3 -m http.server 8080

# 3. 在浏览器中访问
# http://localhost:8080/index.html
```

**优点：**
- 不需要安装额外工具
- Python 自带，简单直接

**注意：** 如果 8080 端口被占用，可以换成其他端口：
```bash
python3 -m http.server 8888
# 然后访问：http://localhost:8888/index.html
```

---

## 📝 完整流程示例

### 生成并查看报告

```bash
# 1. 运行测试并生成报告数据
pytest testcases/ --alluredir=UIreport -v

# 2. 生成 HTML 报告
allure generate UIreport -o UIreport/report --clean

# 3. 查看报告（任选一种方法）
allure serve UIreport
# 或
python3 view_report_http.py
# 或
cd UIreport/report && python3 -m http.server 8080
```

---

## 🔍 常见问题

### Q: 为什么不能直接打开 HTML 文件？
A: 浏览器的安全策略（CORS）不允许本地文件通过 `file://` 协议加载其他本地资源，导致 JavaScript 无法正常工作。

### Q: 报告一直显示 "Loading..." 怎么办？
A: 确保使用 HTTP 服务器访问，不要直接打开 HTML 文件。

### Q: 端口被占用怎么办？
A: 换一个端口号，比如 8888、9000 等。

### Q: 如何停止服务器？
A: 在终端中按 `Ctrl+C`。

---

## 💡 推荐工作流程

1. **开发/调试时**：使用 `allure serve UIreport`（最简单）
2. **生成最终报告**：使用 `allure generate UIreport -o UIreport/report --clean`
3. **查看最终报告**：使用 `python3 view_report_http.py` 或 `python3 -m http.server`
